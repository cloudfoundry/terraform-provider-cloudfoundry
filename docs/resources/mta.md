---
page_title: "cloudfoundry_mta Resource - terraform-provider-cloudfoundry"
subcategory: ""
description: |-
  Allows deploying applications and services via an MTAR archive or URL.
  Further documentation:
  Multitarget Applications in the Cloud Foundry Environment https://help.sap.com/docs/btp/sap-business-technology-platform/multitarget-applications-in-cloud-foundry-environment.
  Note:
  Validation of the yamls are not done from the terraform client side but via the MTA server.
  For viewing deploy logs, TF_LOG or TF_LOG_PROVIDER has to be set to INFO.
---

# cloudfoundry_mta (Resource)

Allows deploying applications and services via an MTAR archive or URL.
		
__Further documentation:__ 
 [Multitarget Applications in the Cloud Foundry Environment](https://help.sap.com/docs/btp/sap-business-technology-platform/multitarget-applications-in-cloud-foundry-environment).

__Note:__ 
 Validation of the yamls are not done from the terraform client side but via the MTA server.
 For viewing deploy logs, TF_LOG or TF_LOG_PROVIDER has to be set to INFO.

## Example Usage

```terraform
resource "cloudfoundry_mta" "mtaone" {
  space                 = "02c0cc92-6ecc-44b1-b7b2-096ca19ee143"
  mtar_path             = "./my-mta_1.0.0.mtar"
  extension_descriptors = ["./prod.mtaext", "prod-scale-vertically.mtaext"]
  namespace             = "test"
  source_code_hash      = join("", [filesha256("./my-mta_1.0.0.mtar"), filesha256("./prod.mtaext"), filesha256("prod-scale-vertically.mtaext")])
  deploy_strategy       = "blue-green-deploy"
}

resource "cloudfoundry_mta" "mtatwo" {
  space     = "02c0cc92-6ecc-44b1-b7b2-096ca19ee143"
  mtar_path = "./my-mta_1.0.0.mtar"
  extension_descriptors_string = [
    <<EOT
_schema-version: 3.3.0
ID: my-mta-prod
extends: my-mta
version: 1.0.0

modules:
- name: my-app
  parameters:
    instances: 2

resources:
 - name: my-service
   parameters:
     service-plan: "lite"
EOT
    ,
    <<EOT
_schema-version: 3.3.0
ID: my-mta-prod-scale-vertically
extends: my-mta-prod
version: 1.0.0

modules:
- name: my-app
  parameters:
    memory: 2G
EOT  
  ]
  namespace        = "test"
  source_code_hash = filesha256("./my-mta_1.0.0.mtar")
  deploy_strategy  = "deploy"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `space` (String) The GUID of the space where the MTA will be deployed

### Optional

- `deploy_strategy` (String) The strategy for deploying the MTA. If attribute value is not provided by default normal deploy strategy is used.
- `deploy_url` (String) The URL of the deploy service, if a custom one has been used(should be present in the same landscape). By default 'deploy-service.<system-domain>'
- `extension_descriptors` (Set of String) The paths for the MTA deployment extension files.
- `extension_descriptors_string` (Set of String) The contents of the MTA deployment extension files.
- `modules` (Set of String) Deploy only the modules of the MTA with the specified names. If not specified, all modules are deployed.
- `mtar_path` (String) The local path where the MTA archive is present. Either this attribute or mtar_url need to be set.
- `mtar_url` (String) The remote URL where the MTA archive is present
- `namespace` (String) The namespace of the MTA. Should be of valid host format
- `skip_idle_start` (Boolean) Skip the starting of the newly deployed applications on idle routes.
- `source_code_hash` (String) SHA256 hash of the file specified. Terraform relies on this to detect the file changes.
- `version_rule` (String) The rule to apply to determine how the application version number is used to trigger an application-update deployment operation.

### Read-Only

- `id` (String) The MTA ID of the deployment
- `mta` (Attributes) contains the details of the MTA object (see [below for nested schema](#nestedatt--mta))

<a id="nestedatt--mta"></a>
### Nested Schema for `mta`

Read-Only:

- `metadata` (Attributes) an identifier, version and namespace that uniquely identify the MTA (see [below for nested schema](#nestedatt--mta--metadata))
- `modules` (Attributes List) the deployable parts contained in the MTA deployment archive, most commonly Cloud Foundry applications or content (see [below for nested schema](#nestedatt--mta--modules))
- `services` (List of String)

<a id="nestedatt--mta--metadata"></a>
### Nested Schema for `mta.metadata`

Read-Only:

- `id` (String)
- `namespace` (String)
- `version` (String)


<a id="nestedatt--mta--modules"></a>
### Nested Schema for `mta.modules`

Read-Only:

- `app_name` (String)
- `created_on` (String)
- `module_name` (String)
- `provided_dendency_names` (List of String)
- `services` (List of String)
- `updated_on` (String)
- `uris` (List of String)

## Import

Import is supported using the following syntax:

```terraform
# terraform import cloudfoundry_mtar.<resource_name> <space_guid/mta_id> OR 
# terraform import cloudfoundry_mtar.<resource_name> <space_guid/mta_id/namespace> if MTA in custom namespace

terraform import cloudfoundry_mtar.my_mtar 02c0cc92-6ecc-44b1-b7b2-096ca19ee143/a.cf.app/hello
```